<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>DuckDuckGo Search</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    body{font-family:system-ui, sans-serif; margin:0; padding:1rem; background:#f7f7f7}
    #bar{display:flex; gap:.5rem; margin-bottom:1rem}
    #q{flex:1; padding:.5rem; font-size:1rem}
    #go{padding:.5rem 1rem; font-size:1rem}
    ul{list-style:none; padding:0; margin:0}
    li{margin:.6rem 0}
    a{font-weight:600; text-decoration:none}
    .snippet{font-size:.9rem; color:#444}
  </style>
</head>
<body>
  <div id="bar">
    <input id="q" type="text" placeholder="Search with DuckDuckGo…" autocomplete="off"/>
    <button id="go">Search</button>
  </div>
  <ul id="res"></ul>

  <script>
    const END='https://api.duckduckgo.com/';
    const $  =s=>document.querySelector(s);
    const qEl=$('#q'), goEl=$('#go'), resEl=$('#res');

    async function search(){
      const q=qEl.value.trim();   if(!q) return;
      resEl.innerHTML='<li>Loading…</li>';
      const url=`${END}?q=${encodeURIComponent(q)}&format=json&no_html=1&skip_disambig=1`;
      try{
        const r=await fetch(url), d=await r.json();  let h='';

        if(d.AbstractText){
          h+=`<li style="background:#fff; padding:.7rem; border-left:4px solid #d77865">
                <strong>${d.Heading||'Instant'}</strong><br>${d.AbstractText}
                ${d.AbstractURL?` <a href="${d.AbstractURL}" target="_blank" rel="noreferrer">More »</a>`:''}
              </li>`;
        }
        (d.RelatedTopics||[]).slice(0,20).forEach(t=>{
          if(!t.FirstURL) return;
          h+=`<li><a href="${t.FirstURL}" target="_blank" rel="noreferrer">${t.Text.split(' - ')[0]}</a>
                <div class="snippet">${t.Result||''}</div></li>`;
        });
        resEl.innerHTML=h||'<li>No results.</li>';
      }catch(e){ resEl.innerHTML=`<li style="color:red">${e.message}</li>`; }
    }
    goEl.addEventListener('click', search);
    qEl.addEventListener('keydown',e=>{if(e.key==='Enter')search()});
  </script>
</body>
</html>
